{
  "test_name": "02_signoz_fetch_transform",
  "timestamp": "2025-10-25T13:34:36.380581+00:00",
  "status": "passed",
  "input": {
    "incident_id": "INC_E2E_001",
    "filter_expression": "service.name = 'payments-service' AND http.status_code >= 500 AND http.status_code < 600 AND severity_text IN ('ERROR', 'WARN')",
    "signoz_query": {
      "start": 1761395672176,
      "end": 1761399272176,
      "requestType": "raw",
      "variables": {},
      "compositeQuery": {
        "queries": [
          {
            "type": "builder_query",
            "spec": {
              "name": "A",
              "signal": "logs",
              "filter": {
                "expression": "service.name = 'payments-service' AND http.status_code >= 500 AND http.status_code < 600 AND severity_text IN ('ERROR', 'WARN')"
              },
              "order": [
                {
                  "key": {
                    "name": "timestamp"
                  },
                  "direction": "desc"
                },
                {
                  "key": {
                    "name": "id"
                  },
                  "direction": "desc"
                }
              ],
              "offset": 0,
              "limit": 1000
            }
          }
        ]
      }
    }
  },
  "output": {
    "raw_response_size": 272547,
    "logs_fetched": 222,
    "sample_log": {
      "timestamp": "2025-10-25T13:26:07.061139968Z",
      "service": "payments-service",
      "instance_id": "payments-service-a42edaef",
      "level": "ERROR",
      "request_id": "c58386c644b1b23cb500086674f7b645",
      "company_id": "testing",
      "user_id": "user-9815",
      "method": "GET",
      "path": "/api/v1/inventory",
      "status_code": 504,
      "response_time_ms": 90,
      "message": "GET /api/v1/inventory - 504 (90ms)"
    },
    "transformed_logs": [
      {
        "timestamp": "2025-10-25T13:26:07.061139968Z",
        "service": "payments-service",
        "instance_id": "payments-service-a42edaef",
        "level": "ERROR",
        "request_id": "c58386c644b1b23cb500086674f7b645",
        "company_id": "testing",
        "user_id": "user-9815",
        "method": "GET",
        "path": "/api/v1/inventory",
        "status_code": 504,
        "response_time_ms": 90,
        "message": "GET /api/v1/inventory - 504 (90ms)"
      },
      {
        "timestamp": "2025-10-25T13:26:07.06061312Z",
        "service": "payments-service",
        "instance_id": "payments-service-a42edaef",
        "level": "ERROR",
        "request_id": "c58386c644b1b23cb500086674f7b645",
        "company_id": "testing",
        "user_id": "user-9815",
        "method": "GET",
        "path": "/api/v1/inventory",
        "status_code": 504,
        "error_message": "Invalid input parameter",
        "stack_trace": "at service.handler(handler.py:513)",
        "message": "Request failed: Invalid input parameter"
      },
      {
        "timestamp": "2025-10-25T13:26:05.184913664Z",
        "service": "payments-service",
        "instance_id": "payments-service-a42edaef",
        "level": "ERROR",
        "request_id": "c13dcc304c15c20b6230701221bd7495",
        "company_id": "testing",
        "user_id": "user-1330",
        "method": "GET",
        "path": "/api/v1/users",
        "status_code": 503,
        "response_time_ms": 65,
        "message": "GET /api/v1/users - 503 (65ms)"
      },
      {
        "timestamp": "2025-10-25T13:26:05.184524288Z",
        "service": "payments-service",
        "instance_id": "payments-service-a42edaef",
        "level": "ERROR",
        "request_id": "c13dcc304c15c20b6230701221bd7495",
        "company_id": "testing",
        "user_id": "user-1330",
        "method": "GET",
        "path": "/api/v1/users",
        "status_code": 503,
        "error_message": "Connection refused",
        "stack_trace": "at service.handler(handler.py:339)",
        "message": "Request failed: Connection refused"
      },
      {
        "timestamp": "2025-10-25T13:26:00.949135872Z",
        "service": "payments-service",
        "instance_id": "payments-service-a42edaef",
        "level": "ERROR",
        "request_id": "63b16fbe470fafa25b7fb879cf3a5df9",
        "company_id": "testing",
        "user_id": "user-1459",
        "method": "DELETE",
        "path": "/api/v1/inventory",
        "status_code": 503,
        "response_time_ms": 84,
        "message": "DELETE /api/v1/inventory - 503 (84ms)"
      }
    ]
  },
  "signoz_info": {
    "endpoint": "https://selected-starling.us.signoz.cloud",
    "api_version": "v5"
  }
}