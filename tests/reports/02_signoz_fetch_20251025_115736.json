{
  "test_name": "02_signoz_fetch_transform",
  "timestamp": "2025-10-25T11:57:36.098033+00:00",
  "status": "passed",
  "input": {
    "incident_id": "INC_E2E_001",
    "filter_expression": "service.name = 'payments-service' AND http.status_code >= 500 AND http.status_code < 600 AND severity_text = 'ERROR'",
    "signoz_query": {
      "start": 1761389852510,
      "end": 1761393452510,
      "requestType": "raw",
      "variables": {},
      "compositeQuery": {
        "queries": [
          {
            "type": "builder_query",
            "spec": {
              "name": "A",
              "signal": "logs",
              "filter": {
                "expression": "service.name = 'payments-service' AND http.status_code >= 500 AND http.status_code < 600 AND severity_text = 'ERROR'"
              },
              "order": [
                {
                  "key": {
                    "name": "timestamp"
                  },
                  "direction": "desc"
                },
                {
                  "key": {
                    "name": "id"
                  },
                  "direction": "desc"
                }
              ],
              "offset": 0,
              "limit": 1000
            }
          }
        ]
      }
    }
  },
  "output": {
    "raw_response_size": 304317,
    "logs_fetched": 248,
    "sample_log": {
      "timestamp": "2025-10-25T11:53:23.595078912Z",
      "service": "payments-service",
      "instance_id": "payments-service-e86baad2",
      "level": "ERROR",
      "request_id": "943603bf97be0f92a50e8a56f1a1a647",
      "company_id": "testing",
      "user_id": "user-7648",
      "method": "GET",
      "path": "/api/v1/products",
      "status_code": 503,
      "response_time_ms": 85,
      "message": "GET /api/v1/products - 503 (85ms)"
    },
    "transformed_logs": [
      {
        "timestamp": "2025-10-25T11:53:23.595078912Z",
        "service": "payments-service",
        "instance_id": "payments-service-e86baad2",
        "level": "ERROR",
        "request_id": "943603bf97be0f92a50e8a56f1a1a647",
        "company_id": "testing",
        "user_id": "user-7648",
        "method": "GET",
        "path": "/api/v1/products",
        "status_code": 503,
        "response_time_ms": 85,
        "message": "GET /api/v1/products - 503 (85ms)"
      },
      {
        "timestamp": "2025-10-25T11:53:23.594250752Z",
        "service": "payments-service",
        "instance_id": "payments-service-e86baad2",
        "level": "ERROR",
        "request_id": "943603bf97be0f92a50e8a56f1a1a647",
        "company_id": "testing",
        "user_id": "user-7648",
        "method": "GET",
        "path": "/api/v1/products",
        "status_code": 503,
        "error_message": "Database timeout",
        "stack_trace": "at service.handler(handler.py:535)",
        "message": "Request failed: Database timeout"
      },
      {
        "timestamp": "2025-10-25T11:53:16.699208192Z",
        "service": "payments-service",
        "instance_id": "payments-service-e86baad2",
        "level": "ERROR",
        "request_id": "940c2685bdfeb847614b69ff0aa8f2f7",
        "company_id": "testing",
        "user_id": "user-3865",
        "method": "PUT",
        "path": "/api/v1/products",
        "status_code": 504,
        "response_time_ms": 87,
        "message": "PUT /api/v1/products - 504 (87ms)"
      },
      {
        "timestamp": "2025-10-25T11:53:16.698761472Z",
        "service": "payments-service",
        "instance_id": "payments-service-e86baad2",
        "level": "ERROR",
        "request_id": "940c2685bdfeb847614b69ff0aa8f2f7",
        "company_id": "testing",
        "user_id": "user-3865",
        "method": "PUT",
        "path": "/api/v1/products",
        "status_code": 504,
        "error_message": "Connection refused",
        "stack_trace": "at service.handler(handler.py:252)",
        "message": "Request failed: Connection refused"
      },
      {
        "timestamp": "2025-10-25T11:53:15.863273984Z",
        "service": "payments-service",
        "instance_id": "payments-service-e86baad2",
        "level": "ERROR",
        "request_id": "5901232a732b1f86f67b883e44496bea",
        "company_id": "testing",
        "user_id": "user-7417",
        "method": "DELETE",
        "path": "/api/v1/products",
        "status_code": 504,
        "response_time_ms": 86,
        "message": "DELETE /api/v1/products - 504 (86ms)"
      }
    ]
  },
  "signoz_info": {
    "endpoint": "https://selected-starling.us.signoz.cloud",
    "api_version": "v5"
  }
}